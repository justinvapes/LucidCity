<!doctype html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="./css/tv-menu.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:800" rel="stylesheet">
        <script src='https://kit.fontawesome.com/00adc32f33.js'></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    </head>
    <body>
        <div id = "off"><i id ="offButton" class="fas fa-power-off"></i></div>
        <div id = "circle"></div>

        <div id = "menu">

        </div>
    </body>
</html>


<script type="text/javascript">

var selected = 1;

var index = 0;

$(document).ready(function(){
    $.post('http://rcore_television/loaded', JSON.stringify({}));
    $.post('http://rcore_television/links', JSON.stringify({}));
    window.addEventListener('message', function(event) {
        var data = event.data;
        if(data.type === "rcore_tv_change"){
            $('#' + selected).css('background','white');
            selected = data.selected
            $('#' + data.selected).css('background','#a2cdf3');
        }
        if(data.type === "rcore_tv_add_tv"){
            index ++;
            $('#menu').append("<div id = '"+ index +"' class = 'box'><i id = 'icon-size' class='" + data.icon +"'></i><p class = 'text'>" + data.title +"</p></div>");
            $('#1').css('background','#a2cdf3');
        }
    });
});

</script>